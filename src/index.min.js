document.addEventListener("DOMContentLoaded",(()=>{const observer=new IntersectionObserver((entries=>{entries.forEach((entry=>{const id=entry.target.getAttribute("id"),li=document.querySelector(`nav li a[href="#${id}"]`).parentElement;if(!li)return;entry.intersectionRatio>0?li.classList.add("nav-visible"):li.classList.remove("nav-visible");const actives=document.querySelectorAll(".toc li.active"),visibles=document.querySelectorAll(".toc li.nav-visible");if(1!==actives.length||0!==visibles.length){actives.forEach((elm=>{elm.classList.remove("active")}));visibles.forEach(((elm,i)=>{0===i&&elm.classList.add("active")}))}}))}));document.querySelectorAll("h2[id], h3[id]").forEach((section=>{observer.observe(section)}))}));